<html>
  <head>
    <title>Single Device Simulator - Application powered by IoT for Electronics</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="/styles/style.css"/>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/javascripts/iotAppMonitorClient.js"></script>
    <script src="/jquery/jquery.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
  </head>
  <body>
    <h4 class="bluemix-bar">Simulated washer experience</h4>
    <div class="main-section">
      <div class="container">
        <h2 >Command and control your simulated washer</h2>
        <h3 class="washer-title"><span><%= deviceId %></span></h3>
        <section class="col-xs-12 col-md-10 content">
          <div class="col-xs-12 col-md-4 problem-machine">
            <h3>Select a problem</h3>
            <p>Watch your washer 's status change. When you try the consumer app, a status change message will automatically be sent to your iOS phone</p>
            <p>Strong vibration</p>
            <p>Water leak</p>
            <button> Refresh View</button>
            <button>Delete washer</button>
          </div>
          <div class="col-xs-12 col-md-8 machine-info">
            <!--<div name="selection-box-2" class="col-md-9 selection-box">-->
            <div class="washer-details">
              <div class="washer-content">
                <img src="/images/washing-machine-placeholders.png" class="washer-machine"/>
              </div>
              <div class="washer-content">
                <div class="washer-text">
                  <h3>Washer Info</h3>
                  <p>Device ID <span><%= deviceId %></span></p>
                  <p>Serial Number <span><%= serialNumber %></span></p>
                  <p>Make, Model <span><%= make %> <%= model %></span></p>
                  <h3>Washer Status</h3>
                  <p>Overall status  <strong><%= deviceStatus %></strong></p>
                  <p>Vibration <strong><%= vibration %></strong></p>
                  <p>Water pressure <strong><%= waterPressure %></strong></p>
                </div>
              </div>
            </div>
            <div class="washer-app-info">
              <div>
                <img src="/qr/<%= deviceId %>"/>
              </div>
              <div>
                <p>When you try the consumer app, you can scan the QR code to see this washer's status and other events on your phone.</p>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <script type="text/javascript">
      iotAppMonitorClient.mqtt = function(id, message) {
        if (id === "<%= deviceId %>") {
          var device = JSON.parse(message).d;
          $('.washer-content .washer-text p strong').eq(0).text(device.status);
          $('.washer-content .washer-text p strong').eq(1).text(device.vibration);
          $('.washer-content .washer-text p strong').eq(2).text(device.waterPressure);
        }
      };

    </script>

  </body>
</html>